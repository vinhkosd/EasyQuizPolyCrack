/*! For license information please see better-dom.min.js.LICENSE.txt */
!function(){"use strict";function c(t){return t.ownerDocument.defaultView.getComputedStyle(t)}function a(t){return t&&t.nodeType===w&&t.ownerDocument.getElementsByTagName("head")[0].appendChild(t)}function f(t,e,n){var r="http://chemerisuk.github.io/better-dom/"+(n=void 0===n?"$Element":n)+".html#"+t,t="invalid call `"+n+("DOM"===n?".":"#")+t+"(";t+=_.call(e,String).join(", ")+")`. ",this.message=t+"Check "+r+" to verify the arguments"}function u(t,e){f.call(this,t,e,"$Document")}function p(t){t&&((this[0]=t).__40100__=this)}function l(t){if(!(this instanceof l))return t?t.__40100__||new l(t):new l;p.call(this,t);var e=t.createElement("style");e.innerHTML=M,a(e),t[C]=e.sheet||e.styleSheet}function h(t){return this instanceof h?void p.call(this,t):t?t.__40100__||new h(t):new h}function t(o){return function(t){var e=this[0];if(!e||"string"!=typeof t)throw new f("create"+o,arguments);var n,r=o?[]:null,i=!r&&B.exec(t);if(i)return new h(e.createElement(i[1]));for(I.innerHTML=t.trim();n=I.firstElementChild;){if(I.removeChild(n),e!==v&&(n=e.adoptNode(n)),!r){r=new h(n);break}r.push(new h(n))}return r||new h}}function i(n,t){var r=h(t),i=n.constructor;Object.keys(n).forEach(function(t){var e=n[t];e!==i&&(r[t]=e)}),i&&i.call(r)}function e(r,i){return function(t){if(t&&typeof t!==i)throw new f(r,arguments);var e=this[0],n=F(t),e=e?e.children:[];return"number"==typeof t?h(e[t=t<0?e.length+t:t]):n?L.call(e,n).map(h):_.call(e,h)}}function n(s,a,c){return function(){var e=this,n=this[0];if(!n||a&&!n.parentNode)return this;for(var r=s?"":n.ownerDocument.createDocumentFragment(),t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return i.forEach(function(t){"string"==typeof(t="function"==typeof t?t(e):t)?"string"==typeof r?r+=t.trim():t=l(n.ownerDocument).createAll(t):t instanceof h&&(t=[t]),D(t)&&("string"==typeof r&&(t=l(n.ownerDocument).createAll(r).concat(t),r=n.ownerDocument.createDocumentFragment()),t.forEach(function(t){r.appendChild(t[0])}))}),"string"==typeof r?n.insertAdjacentHTML(s,r):c(n,r),this}}function r(o,s,a){return function(t){if(t&&"string"!=typeof t)throw new f(o,arguments);var e=this[0],n=a?[]:null;if(e)for(var r=F(t),i=e=e&&(!r||"closest"!==o)?e[s]:e;i;i=i[s])if(!r||r(i)){if(!n){n=h(i);break}n.push(h(i))}return n||new h}}function o(t,e){this.node=t,this.style=t.style,this.eventType=e?J:G,this.animationName=e}function s(s,a){return function(t,e){var n=this;if("string"!=typeof t&&(e=t,t=null),e&&"function"!=typeof e)throw new f(s,arguments);var r=this[0];if(!r)return this;var i,o=c(r);return r&&o.width&&(i=function(){r.style.visibility=a?"hidden":"inherit","function"==typeof e&&e(n)},!r.ownerDocument.documentElement.contains(r)||!t&&0===parseFloat(o["transition-duration"])||t&&0===parseFloat(o["animation-duration"])?k(i):(r.style.visibility="visible",new Q(r,t).start(i,a?"normal":"reverse"))),this.set("aria-hidden",String(a))}}function y(o,s){return function(t){if("string"!=typeof t)throw new f(o,arguments);var e,n,r,i=this[0];return i?(this instanceof l||this instanceof h?(r=tt.exec(t))?(e=r[1]?i.getElementsByTagName(t):i.getElementsByClassName(r[2]))&&!s&&(e=e[0]):this instanceof h?((r=i.getAttribute("id"))?n=r.replace(et,"\\$&"):i.setAttribute("id",n="___40100__"),t=(n="[id='"+n+"'] ")+t.split(",").join(","+n),e=i["querySelector"+s](t),r||i.removeAttribute("id")):e=i["querySelector"+s](t):e=i["querySelector"+s](t),s?_.call(e,h):h(e)):s?[]:new p}}function m(t,e,n,r){this.context=t,this.node=e,this.options=n,this.args=r,n.selector&&(this.matcher=F(n.selector,e))}var d=window,v=document,g=v.documentElement,w=v.ELEMENT_NODE,b=v.DOCUMENT_NODE,E=["Webkit","O","Moz","ms"],A="v__40100__",C="__40100__sheet",T=d.WebKitAnimationEvent?"-webkit-":"",N=Array.prototype,S=N.every,x=N.forEach,L=N.filter,_=N.map,D=(N.slice,Array.isArray),O=Object.keys,k=d.requestAnimationFrame;f.prototype=new TypeError,new TypeError,u.prototype=new TypeError,p.prototype={toString:function(){return""},valueOf:function(){return 0}};var M="@"+T+"keyframes "+A+" {from {opacity:.99} to {opacity:1}}",N=new p;(l.prototype=N).valueOf=function(){return this[0]?b:0},N.toString=function(){return"#document"};N=new p;(h.prototype=N).valueOf=function(){return this[0]?w:0},N.toString=function(){var t=this[0];return t?"<"+t.tagName.toLowerCase()+">":"#unknown"};var j=new l(d.document),P=d.DOM;j.constructor=function(t){var e=t&&t.nodeType;return e===w?h(t):e===b?l(t):new p(t)},j.noConflict=function(){return d.DOM===j&&(d.DOM=P),j},d.DOM=j;var B=/^<([a-zA-Z-]+)\/?>$/,I=v.createElement("body");l.prototype.create=t(""),l.prototype.createAll=t("All");function F(o,s){if("string"!=typeof o)return null;var a=R.exec(o);return a&&(a[1]&&(a[1]=a[1].toLowerCase()),a[3]&&(a[3]=a[3].split("=")),a[4]&&(a[4]=" "+a[4]+" ")),function(t){var e,n;for(a||q||(n=(s||t.ownerDocument).querySelectorAll(o));t&&1===t.nodeType;t=t.parentNode){if(a)e=(!a[1]||t.nodeName.toLowerCase()===a[1])&&(!a[2]||t.id===a[2])&&(!a[3]||(a[3][1]?t.getAttribute(a[3][0])===a[3][1]:t.hasAttribute(a[3][0])))&&(!a[4]||0<=(" "+t.className+" ").indexOf(a[4]));else if(q)e=t[q](o);else for(var r=0,i=n.length;r<i;++r)if((i=n[r])===t)return i;if(e||!s||t===s)break}return e&&t}}var R=/^(\w*)(?:#([\w\-]+))?(?:\[([\w\-\=]+)\])?(?:\.([\w\-]+))?$/,q=E.concat(null).map(function(t){return(t?t.toLowerCase()+"M":"m")+"atchesSelector"}).reduceRight(function(t,e){return t||e in g&&e},null),H=[],U=T?"webkitAnimationStart":"animationstart",$=[T+"animation-name:"+A+" !important",T+"animation-duration:1ms !important"].join(";");l.prototype.extend=function(e,n){var t=this[0];if(!t)return this;if(1===arguments.length&&"object"==typeof e)return O(e).forEach(function(t){l.prototype[t]=e[t]}),this;if("*"===e)return O(n).forEach(function(t){h.prototype[t]=n[t]}),this;if(!(n="function"==typeof n?{constructor:n}:n)||"object"!=typeof n)throw new u("extend",arguments);var r=F(e);H.push([r,n]),t.addEventListener(U,function(t){var e=t.target;t.animationName===A&&r(e)&&(t.stopPropagation(),e.style.setProperty(T+"animation-name","none","important"),i(n,e))},!0),x.call(t.querySelectorAll(e),function(t){t.style.setProperty(T+"animation-name","none","important"),d.setTimeout(function(){i(n,t)},0)}),this.importStyles(e,$)},l.prototype.mock=function(t){if(!t)return new h;var e=this.create(t),t=function t(n){H.forEach(function(t){var e=t[0],t=t[1];e(n)&&i(t,n)}),x.call(n.children,t)};return H.length&&t(e[0]),e},l.prototype.importScripts=function(){for(var i=this,o=arguments,t=arguments.length,s=new Array(t),e=0;e<t;e++)s[e]=arguments[e];(function t(){var e=i[0];if(e){var n=s.shift(),r=typeof n;if("string"==r)(e=e.createElement("script")).src=n,e.onload=t,e.async=!0,a(e);else if("function"==r)n();else if(n)throw new u("importScripts",o)}})()},l.prototype.importStyles=function(t,e){var n=this[0];if(n){if(e||"string"!=typeof t||(e=t,t="@media screen"),"string"!=typeof t||"string"!=typeof e)throw new u("importStyles",arguments);var r=n[C],i=r.cssRules.length;t.split(",").forEach(function(t){try{i=r.insertRule(t+"{"+e+"}",i)}catch(t){}})}},h.prototype.child=e("child","number"),h.prototype.children=e("children","string");function z(t){return(" "+t.className+" ").replace(W," ")}var W=/[\n\t\r]/g;h.prototype.hasClass=function(t){if("string"!=typeof t)throw new f("hasClass",arguments);var e=this[0];return!!e&&(e.classList?e.classList.contains(t):0<=z(e).indexOf(" "+t+" "))},h.prototype.addClass=function(){for(var e=this,n=arguments,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=this[0];return o&&r.forEach(function(t){if("string"!=typeof t)throw new f("addClass",n);o.classList?o.classList.add(t):e.hasClass(t)||(e[0].className+=" "+t)}),this},h.prototype.removeClass=function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=this[0];return i&&n.forEach(function(t){if("string"!=typeof t)throw new f("removeClass",e);i.classList?i.classList.remove(t):i.className=z(i).replace(" "+t+" "," ").trim()}),this},h.prototype.toggleClass=function(t,e){if("string"!=typeof t)throw new f("toggleClass",arguments);return"boolean"!=typeof e&&(e=!this.hasClass(t)),this[0]&&(e?this.addClass(t):this.removeClass(t)),e};var X=/\-./g,K={get:{},set:{},find:function(t,e){var n=t.replace(X,function(t){return t[1].toUpperCase()});return n in e||(n=E.map(function(t){return t+n[0].toUpperCase()+n.slice(1)}).filter(function(t){return t in e})[0]),this.get[t]=this.set[t]=n}},N=["Top","Right","Bottom","Left"],V={font:["fontStyle","fontSize","/","lineHeight","fontFamily"],padding:N.map(function(t){return"padding"+t}),margin:N.map(function(t){return"margin"+t}),"border-width":N.map(function(t){return"border"+t+"Width"}),"border-style":N.map(function(t){return"border"+t+"Style"})};K.get.float=K.set.float="cssFloat","fill-opacity font-weight line-height opacity orphans widows z-index zoom".split(" ").forEach(function(t){var n=t.replace(X,function(t){return t[1].toUpperCase()});K.get[t]=n,K.set[t]=function(t,e){e[n]=t.toString()}}),O(V).forEach(function(t){var i=V[t];K.get[t]=function(n){var r=[];return i.some(function(t,e){return r.push("/"===t?t:n[t]),!r[e]})?"":r.join(" ")},K.set[t]=function(e,n){e&&"cssText"in n?n.cssText+=";"+t+":"+e:i.forEach(function(t){return n[t]="number"==typeof e?e+"px":e.toString()})}});var Y=K;h.prototype.css=function(r,t){var e=this,n=arguments.length,i=this[0];if(i){var o,s=i.style;if(1===n&&("string"==typeof r||D(r))){var a=function(t){var e=Y.get[t]||Y.find(t,s),t="function"==typeof e?e(s):s[e];return t||(o=o||c(i),t="function"==typeof e?e(o):o[e]),t};return"string"==typeof r?a(r):r.map(a).reduce(function(t,e,n){return t[r[n]]=e,t},{})}if(2===n&&"string"==typeof r){a=Y.set[r]||Y.find(r,s);null==(t="function"==typeof t?t(this):t)&&(t=""),"function"==typeof a?a(t,s):s[a]="number"==typeof t?t+"px":t.toString()}else{if(1!==n||!r||"object"!=typeof r)throw new f("css",arguments);O(r).forEach(function(t){e.css(t,r[t])})}return this}return 1===n&&D(r)?{}:1!==n||"string"!=typeof r?this:void 0},h.prototype.after=n("afterend",!0,function(t,e){t.parentNode.insertBefore(e,t.nextSibling)}),h.prototype.before=n("beforebegin",!0,function(t,e){t.parentNode.insertBefore(e,t)}),h.prototype.prepend=n("afterbegin",!1,function(t,e){t.insertBefore(e,t.firstChild)}),h.prototype.append=n("beforeend",!1,function(t,e){t.appendChild(e)}),h.prototype.replace=n("",!0,function(t,e){t.parentNode.replaceChild(e,t)}),h.prototype.remove=n("",!0,function(t){t.parentNode.removeChild(t)});var Z={":focus":function(t){return t===t.ownerDocument.activeElement}};h.prototype.matches=function(t){if(!t||"string"!=typeof t)throw new f("matches",arguments);return!!(Z[t]||F(t))(this[0])},h.prototype.offset=function(){var t,e,n,r,i=this[0],o={top:0,left:0,right:0,bottom:0,width:0,height:0};return i&&(t=(r=(i.ownerDocument||i).documentElement).clientTop,e=r.clientLeft,n=d.pageYOffset||r.scrollTop,r=d.pageXOffset||r.scrollLeft,i=i.getBoundingClientRect(),o.top=i.top+n-t,o.left=i.left+r-e,o.right=i.right+r-e,o.bottom=i.bottom+n-t,o.width=i.right-i.left,o.height=i.bottom-i.top),o},h.prototype.next=r("next","nextElementSibling"),h.prototype.prev=r("prev","previousElementSibling"),h.prototype.nextAll=r("nextAll","nextElementSibling",!0),h.prototype.prevAll=r("prevAll","previousElementSibling",!0),h.prototype.closest=r("closest","parentNode"),h.prototype.value=function(e){var t=this[0];if(!t)return e?this:void 0;var n=t.tagName;if(void 0===e)return"SELECT"===n?~t.selectedIndex?t.options[t.selectedIndex].value:"":"OPTION"===n?t.hasAttribute("value")?t.value:t.text:"INPUT"===n||"TEXTAREA"===n?t.value:t.textContent;switch(n){case"INPUT":case"OPTION":case"TEXTAREA":"function"==typeof e&&(e=e(t.value)),t.value=e;break;case"SELECT":"function"==typeof e&&(e=e(t.value)),S.call(t.options,function(t){return!(t.selected=t.value===e)})&&(t.selectedIndex=-1);break;default:"function"==typeof e&&(e=e(t.textContent)),t.textContent=e}return this},h.prototype.empty=function(){return this.value("")};var G=T?"webkitTransitionEnd":"transitionend",J=T?"webkitAnimationEnd":"animationend";o.prototype={handleEvent:function(t){this.animationName&&t.animationName!==this.animationName||(this.animationName&&(this.style.animationName="",this.style.animationDirection=""),this.node.removeEventListener(this.eventType,this,!0),"function"==typeof this.callback&&this.callback())},start:function(t,e){this.callback=t,this.animationName&&(this.style.animationName=this.animationName,this.style.animationDirection=e),this.node.addEventListener(this.eventType,this,!0)}};var Q=o;h.prototype.show=s("show",!1),h.prototype.hide=s("hide",!0),p.prototype.clone=function(t){if("boolean"!=typeof t)throw new f("clone",arguments);var e=this[0];if(e){t=e.cloneNode(t);if(this instanceof h)return new h(t);if(this instanceof l)return new l(t)}return new p},p.prototype.contains=function(t){var e=this[0];if(!e)return!1;if(t instanceof h){t=t[0];return t===e||(e.contains?e.contains(t):16&e.compareDocumentPosition(t))}throw new f("contains",arguments)};var tt=/^(?:(\w+)|\.([\w\-]+))$/,et=/'|\\/g;p.prototype.find=y("find",""),p.prototype.findAll=y("findAll","All");N={};"onfocusin"in g?(N.focus=function(t){t._type="focusin"},N.blur=function(t){t._type="focusout"}):N.focus=N.blur=function(t){t.options.capture=!0},v.createElement("input").validity&&(N.invalid=function(t){t.options.capture=!0});var nt=N,rt=!1;try{var it=Object.defineProperty({},"passive",{get:function(){rt=!0}});d.addEventListener("test",null,it)}catch(t){}m.prototype={handleEvent:function(t){var e;this.event=t,this.currentTarget=this.matcher?this.matcher(t.target):this.node,this.currentTarget&&(!0===this.options.once&&this.unsubscribe(),e=this.args.map(this.getEventProperty,this),!1===this.callback.apply(this.context,e)&&t.preventDefault())},getEventProperty:function(t){var e=arguments,n=this.event;if("type"===t)return this.type;if("target"===t||"relatedTarget"===t)return h(n[t]);if("currentTarget"===t)return h(this.currentTarget);var r=n[t];return"function"==typeof r?function(){return r.apply(n,e)}:r},subscribe:function(t,e){var n=nt[t];this.type=t,this.callback=e,n&&n(this),this.node.addEventListener(this._type||this.type,this,this.getLastArgument())},unsubscribe:function(){this.node.removeEventListener(this._type||this.type,this,this.getLastArgument())},getLastArgument:function(){var t=!!this.options.capture;return t=this.options.passive&&rt?{passive:!0,capture:t}:t}};var ot=m;p.prototype.fire=function(e,t){var n=this[0];if("string"!=typeof e)throw new f("fire",arguments);var r,i=nt[e],o={options:{}};return i=(o=i?i(o)||o:o)._type||e,!n||((o=(n.ownerDocument||n).createEvent("CustomEvent")).initCustomEvent(i,!0,!0,t),(o=n.dispatchEvent(o))&&n[e]&&(r=ot.prototype.handleEvent,ot.prototype.handleEvent=function(t){if(this.type!==e)return r.call(this,t)},n[e](),ot.prototype.handleEvent=r),o)};var st={get:{},set:{}};"tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" ").forEach(function(e){st.get[e.toLowerCase()]=function(t){return t[e]}}),st.get.style=function(t){return t.style.cssText},st.set.style=function(t,e){t.style.cssText=e},st.get.type=function(t){return t.getAttribute("type")||t.type};var at=st;p.prototype.get=function(t,e){var n,r=this,i=this[0],o=at.get[t];if(!i)return n;if(0===arguments.length)return i.innerHTML;if(o)n=o(i,t);else if("string"==typeof t)n=t in i?i[t]:this instanceof h?i.getAttribute(t):null;else{if(!D(t))throw new f("get",arguments);n=t.reduce(function(t,e){return t[e]=r.get(e),t},{})}return null!=n?n:e},p.prototype.on=function(t,e,n,r){if("string"==typeof t&&("string"==typeof e?e={selector:e}:"function"==typeof e?(r=e,e={},n=[]):"object"==typeof e&&D(e)&&(r=n,n=e,e={}),"function"==typeof n&&(r=n,n=[]),e&&"object"==typeof e&&"function"==typeof r)){var i=this[0];if(!i)return function(){};var o=new ot(this,i,e,n);return o.subscribe(t,r),function(){return o.unsubscribe()}}throw new f("on",arguments)},p.prototype.set=function(e,n){var r=this,t=this[0],i=arguments.length,o=at.set[e];if(t)if("string"==typeof e)1===i&&(n=e,e="innerHTML"),"function"==typeof n&&(n=n(this.get(e))),o?o(t,n):null==n&&this instanceof h?t.removeAttribute(e):e in t?t[e]=n:this instanceof h&&t.setAttribute(e,n);else if(D(e))1===i?(t.textContent="",this.append.apply(this,e)):e.forEach(function(t){r.set(t,n)});else{if("object"!=typeof e)throw new f("set",arguments);O(e).forEach(function(t){r.set(t,e[t])})}return this}}();